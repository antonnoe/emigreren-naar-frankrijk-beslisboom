<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Emigreren naar Frankrijk – Scenario Check</title>
<style>
  body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4; color: #333; line-height: 1.6; margin: 0; padding: 20px; }
  .container { max-width: 800px; margin: 0 auto; background: #fff; padding: 40px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
  
  h1 { color: #800000; text-align: center; margin-bottom: 10px; }
  p.intro { text-align: center; margin-bottom: 30px; color: #666; }
  
  .question-block { margin-bottom: 25px; padding: 20px; border-left: 5px solid #800000; background: #fdfcfc; border-radius: 4px; }
  label { font-weight: bold; display: block; margin-bottom: 10px; color: #800000; }
  
  select, input[type="text"], input[type="number"] { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px; box-sizing: border-box; }
  select:focus, input:focus { border-color: #800000; outline: none; }

  button.btn-main { display: block; width: 100%; padding: 15px; background: #800000; color: #fff; border: none; border-radius: 5px; font-size: 18px; cursor: pointer; transition: background 0.3s; margin-top: 20px; }
  button.btn-main:hover { background: #600000; }

  #resultaat { display: none; margin-top: 30px; padding: 25px; border: 2px solid #800000; border-radius: 8px; background-color: #fffaf0; }
  .score-badge { display: inline-block; padding: 5px 15px; border-radius: 4px; color: #fff; font-weight: bold; margin-bottom: 15px; }
  .bg-red { background-color: #d32f2f; }
  .bg-orange { background-color: #f57c00; }
  .bg-green { background-color: #388e3c; }
  
  .action-list li { margin-bottom: 10px; }
  .action-link { color: #800000; text-decoration: underline; font-weight: bold; }
</style>
</head>
<body>

<div class="container">
  <h1>Migreren naar Frankrijk</h1>
  <p class="intro">Validatie & Impactanalyse. Beantwoord de vragen voor een persoonlijk risicoprofiel.</p>

  <div id="vragenlijst">
    </div>

  <button class="btn-main" onclick="berekenScenario()">Bekijk mijn Scenario</button>

  <div id="resultaat">
    <h2 id="res-titel"></h2>
    <div id="res-badge"></div>
    <p id="res-tekst"></p>
    
    <div id="res-acties" style="display:none;">
      <h3>Aanbevolen acties & Tools:</h3>
      <ul id="actie-lijst" class="action-list"></ul>
    </div>
  </div>
</div>

<script>
// --- DE DATA (CONFIGURATIE) ---
const vragen = [
  // A. Huishouden & Basis
  { id: "q1", vraag: "Wie verhuist er?", type: "select", opties: ["Alleen ik", "Ik met partner", "Gezin met kinderen"] },
  { id: "q2", vraag: "Emigreert u samen met een partner, is de rolverdeling en wederzijdse verwachting (werk/zorg/integratie) expliciet besproken?", type: "select", opties: ["Ja", "Deels", "Nee", "N.v.t. (alleen)"] },
  { id: "q3", vraag: "Zijn er schoolgaande kinderen?", type: "select", opties: ["Ja", "Nee"] },
  { id: "q4", vraag: "Is er sprake van een chronische zorgbehoefte in het huishouden?", type: "select", opties: ["Ja", "Nee"] },

  // B. Wonen
  { id: "q5", vraag: "Wat is de woonstrategie?", type: "select", opties: ["Huren", "Kopen", "Eerst huren dan kopen", "Onzeker"] },
  { id: "q6", vraag: "Is de pandbestemming (PLU) formeel gecontroleerd (indien van toepassing voor inkomen)?", type: "select", opties: ["Ja", "Nee", "Deels", "N.v.t."] },
  { id: "q7", vraag: "Zijn dubbele woonlasten (6-12 maanden) financieel draagbaar?", type: "select", opties: ["Ja", "Nee", "Twijfelachtig"] },

  // C. Financiën
  { id: "q8", vraag: "Wat is de primaire inkomensbron?", type: "select", opties: ["Pensioen/AOW", "Loon (FR/Remote)", "Ondernemen (FR)", "Vermogen/Lijfrente", "Seizoenswerk"] },
  { id: "q9", vraag: "Heeft u een realistische Franse netto-inkomensberekening gemaakt (na FR belastingen/sociale lasten)?", type: "select", opties: ["Ja", "Nee"] },
  { id: "q10", vraag: "Beschikt u over een noodbuffer (6 maanden leefgeld)?", type: "select", opties: ["Ja", "Nee", "Deels"] },
  { id: "q11", vraag: "Bent u van plan lijfrente of kapitaal in één keer op te nemen?", type: "select", opties: ["Ja", "Nee"] },

  // D. Werk & Ondernemen (Conditioneel in hoofd, hier platgeslagen voor logica)
  { id: "q12", vraag: "Indien ondernemen: Is uw beroep gereguleerd en heeft u de juiste papieren/inschrijving (Chambre)?", type: "select", opties: ["Ja", "Nee/Onzeker", "N.v.t."] },
  
  // E. Zorg & Verzekering
  { id: "q13", vraag: "Heeft u al zicht op een Frans zorgnummer (Sécu) of verdragsrecht (CAK)?", type: "select", opties: ["Ja", "Nee/Nog niet"] },
  { id: "q14", vraag: "Is een aanvullende verzekering (Mutuelle) gebudgetteerd?", type: "select", opties: ["Ja", "Nee"] },

  // F. Onderwijs & Logistiek
  { id: "q15", vraag: "Indien kinderen: Is schoolvervoer en opvang (woensdagmiddag) geregeld?", type: "select", opties: ["Ja", "Nee/Deels", "N.v.t."] },
  { id: "q16", vraag: "Is de afstand tot voorzieningen (school/zorg) winter-proof (<30 min)?", type: "select", opties: ["Ja", "Nee", "Twijfelachtig"] },

  // G. Integratie
  { id: "q17", vraag: "Spreekt u de Franse taal (minimaal basis)?", type: "select", opties: ["Ja", "Een beetje", "Nee"] },
  { id: "q18", vraag: "Heeft u een plan voor sociaal contact buiten de 'Nederlandse bubbel'?", type: "select", opties: ["Ja", "Nee"] },
  { id: "q19", vraag: "Is remigratie binnen 12 maanden financieel mogelijk (Plan B)?", type: "select", opties: ["Ja", "Nee", "Moeilijk"] }
];

// --- RENDERING VAN DE VRAGEN ---
const container = document.getElementById("vragenlijst");
vragen.forEach(q => {
  const div = document.createElement("div");
  div.className = "question-block";
  div.innerHTML = `
    <label>${q.vraag}</label>
    <select id="${q.id}">
      <option value="">Maak een keuze...</option>
      ${q.opties.map(opt => `<option value="${opt}">${opt}</option>`).join("")}
    </select>
  `;
  container.appendChild(div);
});

// --- DE INTELLIGENTIE (LOGICA) ---
function berekenScenario() {
  // 1. Antwoorden ophalen
  const antwoorden = {};
  vragen.forEach(q => {
    antwoorden[q.id] = document.getElementById(q.id).value;
  });

  // Validatie: is alles ingevuld? (Simpel gehouden voor nu)
  // ...

  let risicoScore = 0;
  let risicoFactoren = [];
  let acties = [];

  // --- COMPOUND LOGICA (DE SLIMME REGELS) ---
  
  // REGEL 1: De Pensioen Val
  // Als je van pensioen leeft maar niet weet wat je netto overhoudt in FR.
  if (antwoorden.q8.includes("Pensioen") && antwoorden.q9 === "Nee") {
    risicoScore += 5;
    risicoFactoren.push("Inkomensonzekerheid: Pensioen zonder netto-toets.");
    acties.push({tekst: "Gebruik het Financieel Kompas voor een netto-berekening", link: "#tool-financieel"});
  }

  // REGEL 2: Het 'Ik vertrek' scenario (Ondernemen zonder buffer)
  if (antwoorden.q8.includes("Ondernemen") && (antwoorden.q10 === "Nee" || antwoorden.q7 === "Nee")) {
    risicoScore += 5;
    risicoFactoren.push("Starten zonder buffer of draagkracht voor dubbele lasten.");
    acties.push({tekst: "Herbereken noodzakelijke startbuffer", link: "#tool-buffer"});
  }

  // REGEL 3: De Zorgkloof
  // Chronisch ziek EN geen zicht op inschrijving/mutuelle
  if (antwoorden.q4 === "Ja" && (antwoorden.q13.includes("Nee") || antwoorden.q14 === "Nee")) {
    risicoScore += 6; // Hoge impact!
    risicoFactoren.push("Kritiek zorg-risico: Chronische zorg zonder dekkingsplan.");
    acties.push({tekst: "Raadpleeg stappenplan Zorg & CAK", link: "#tool-zorg"});
  }

  // REGEL 4: Het Kapitaallek (Belasting)
  if (antwoorden.q11 === "Ja") {
    risicoScore += 3;
    risicoFactoren.push("Fiscaal risico: Opname kapitaal kan progressief belast worden.");
    acties.push({tekst: "Check fiscale impact lijfrente afkoop", link: "#tool-fiscaal"});
  }

  // REGEL 5: Gezinsdruk
  if (antwoorden.q3 === "Ja" && (antwoorden.q15.includes("Nee") || antwoorden.q16 === "Nee")) {
    risicoScore += 4;
    risicoFactoren.push("Logistieke druk op gezin (schoolvervoer/afstanden).");
    acties.push({tekst: "Bekijk Schooltijden & Locaties tool", link: "#tool-school"});
  }

  // REGEL 6: De Eenzaamheidsval
  if (antwoorden.q17 === "Nee" && antwoorden.q18 === "Nee") {
    risicoScore += 3;
    risicoFactoren.push("Hoog risico op sociaal isolement (Taal + Netwerk).");
    acties.push({tekst: "Start met de Taalassistent", link: "#tool-taal"});
  }

  // Regel 7: Ondernemen & Regels
  if (antwoorden.q8.includes("Ondernemen") && antwoorden.q12.includes("Nee")) {
    risicoScore += 5;
    risicoFactoren.push("Juridisch blok: Ondernemen zonder juiste papieren/Chambre.");
    acties.push({tekst: "Doe de Chambre-checker", link: "#tool-chambre"});
  }

  // --- UITKOMST BEPALEN ---
  const resDiv = document.getElementById("resultaat");
  const resTitel = document.getElementById("res-titel");
  const resBadge = document.getElementById("res-badge");
  const resTekst = document.getElementById("res-tekst");
  const actieLijst = document.getElementById("actie-lijst");
  const resActies = document.getElementById("res-acties");

  actieLijst.innerHTML = ""; // Reset
  resDiv.style.display = "block";

  if (risicoScore >= 7) {
    // ROOD
    resTitel.innerText = "Scenario Analyse: Hoog Risico";
    resBadge.innerText = "ROOD - STOP & HERBEREKEN";
    resBadge.className = "score-badge bg-red";
    resTekst.innerText = "Uw huidige plannen bevatten kritieke onzekerheden die uw migratie in gevaar kunnen brengen. De combinatie van factoren (" + risicoFactoren.join(", ") + ") vraagt om directe actie voordat u vertrekt.";
  } else if (risicoScore >= 3) {
    // ORANJE
    resTitel.innerText = "Scenario Analyse: Aandacht Vereist";
    resBadge.innerText = "ORANJE - CORRIGEER";
    resBadge.className = "score-badge bg-orange";
    resTekst.innerText = "Uw plan is haalbaar, maar er zijn belangrijke gaten (" + risicoFactoren.join(", ") + "). Zonder correctie kunnen deze leiden tot financiële of sociale problemen.";
  } else {
    // GROEN
    resTitel.innerText = "Scenario Analyse: Stabiel";
    resBadge.innerText = "GROEN - GOED VOORBEREID";
    resBadge.className = "score-badge bg-green";
    resTekst.innerText = "Uw basis lijkt solide. Blijf alert op details, maar de grote pijlers (Inkomen, Wonen, Zorg) lijken in orde.";
  }

  // Toon acties als er issues zijn
  if (acties.length > 0) {
    resActies.style.display = "block";
    acties.forEach(actie => {
      const li = document.createElement("li");
      li.innerHTML = `${actie.tekst} <a href="${actie.link}" target="_blank" class="action-link">Start Tool &rarr;</a>`;
      actieLijst.appendChild(li);
    });
  } else {
    resActies.style.display = "none";
  }
  
  // Scroll naar resultaat
  resDiv.scrollIntoView({ behavior: 'smooth' });
}
</script>

</body>
</html>
